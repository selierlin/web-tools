<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- TDK 优化 (Title, Description, Keywords) -->
    <title>极简工具箱 - 程序员在线工具合集 (JSON/编码/加解密/时间戳/正则/Cron)</title>
    <meta name="description"
          content="极简工具箱提供免费、无广告的在线开发工具：文本加工、Base64/URL 编码解码、二维码生成、MD5/SHA/AES 加解密、文本对比、JSON 格式化、时间戳与日期计算、正则可视化、Cron 表达式、UUID 生成、Nacos 服务管理等。">
    <meta name="keywords" content="在线工具,极简工具箱,JSON格式化,编码解码,Base64,加解密,二维码,时间戳,正则表达式,Cron,UUID,Nacos,程序员工具">
    <meta name="author" content="极简工具箱">

    <!-- Open Graph (社交媒体/即时通讯分享) -->
    <meta property="og:title" content="极简工具箱 | 开发者的在线工具合集">
    <meta property="og:description" content="免费无广告：JSON 格式化、编码解码、加解密、时间戳、正则、Cron、UUID、二维码等在线工具。">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://qr.linliang.top">
    <meta property="og:locale" content="zh_CN">
    <meta property="og:image" content="https://cdn.linliang.top/tool/tool.ico">

    <!-- 规范链接 (避免重复内容) -->
    <link rel="canonical" href="https://qr.linliang.top">

    <!-- 网站图标 (HTTPS 避免混合内容) -->
    <link rel="icon" href="https://cdn.linliang.top/tool/tool.ico" type="image/x-icon">

    <!-- 国内 CDN：Font Awesome（BootCDN） -->
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* SEO 隐藏内容 */
        .seo-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        :root {
            --primary: #6366f1;
            --primary-hover: #818cf8;
            --primary-glow: rgba(99, 102, 241, 0.35);
            --bg-dark: #0c0f1a;
            --bg-card: #131825;
            --nav-bg: rgba(19, 24, 37, 0.85);
            --nav-border: rgba(255, 255, 255, 0.06);
            --text-light: #f1f5f9;
            --text-muted: #64748b;
            --radius: 12px;
            --radius-sm: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Microsoft YaHei", "Hiragino Sans GB", "Helvetica Neue", sans-serif;
        }

        body {
            background: var(--bg-dark);
            background-image: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(99, 102, 241, 0.12), transparent),
            radial-gradient(ellipse 60% 40% at 100% 0%, rgba(139, 92, 246, 0.08), transparent);
            min-height: 100vh;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            color: var(--text-light);
        }

        header {
            display: flex;
            align-items: center;
            padding: 0 24px;
            height: 64px;
            background: var(--nav-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--nav-border);
            z-index: 10;
        }

        .header-title {
            margin: 0;
            font-size: inherit;
            font-weight: inherit;
            line-height: 1;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.25rem;
            font-weight: 700;
            background: linear-gradient(135deg, #818cf8 0%, #a78bfa 50%, #c084fc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-right: 32px;
            white-space: nowrap;
            letter-spacing: -0.02em;
        }

        .logo i {
            -webkit-text-fill-color: #a78bfa;
        }

        .search-container {
            position: relative;
            margin-right: 24px;
            display: flex;
            align-items: center;
        }

        .search-box {
            width: 200px;
            padding: 10px 40px 10px 16px;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: var(--radius);
            color: var(--text-light);
            font-size: 0.9rem;
            transition: width 0.25s ease, border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .search-box:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-glow);
            width: 260px;
        }

        .search-box::placeholder {
            color: var(--text-muted);
        }

        .search-icon {
            position: absolute;
            right: 14px;
            color: var(--text-muted);
            pointer-events: none;
            font-size: 0.85rem;
        }

        /* 分类筛选：工具多时缩小范围 */
        .category-filter {
            display: flex;
            align-items: center;
            gap: 6px;
            flex-shrink: 0;
            margin-right: 12px;
            padding: 4px;
            background: rgba(255, 255, 255, 0.04);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.06);
        }

        .category-btn {
            padding: 6px 14px;
            border: none;
            border-radius: 8px;
            background: transparent;
            color: var(--text-muted);
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            position: relative;
            overflow: hidden;
        }

        .category-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2) 0%, rgba(139, 92, 246, 0.2) 100%);
            opacity: 0;
            transition: opacity 0.25s ease;
            border-radius: inherit;
        }

        .category-btn:hover {
            color: var(--text-light);
            transform: translateY(-1px);
        }

        .category-btn:hover::before {
            opacity: 1;
        }

        .category-btn.active {
            background: linear-gradient(135deg, var(--primary) 0%, #7c3aed 100%);
            color: #fff;
            box-shadow: 0 4px 14px rgba(99, 102, 241, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1) inset;
            font-weight: 600;
        }

        .category-btn.active:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.15) inset;
        }

        .menu-wrapper {
            flex: 1;
            min-width: 0;
            overflow-x: auto;
            overflow-y: hidden;
            position: relative;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .menu-wrapper::-webkit-scrollbar {
            display: none;
        }

        /* 右侧渐变遮罩：提示还有更多，可滑动；不挡点击 */
        .menu-wrapper::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            width: 28px;
            pointer-events: none;
            background: linear-gradient(to right, transparent, var(--nav-bg));
            z-index: 1;
        }

        .menu-list {
            display: flex;
            flex-wrap: nowrap;
            list-style: none;
            gap: 6px;
            padding: 6px 32px 6px 0;
        }

        .menu-item {
            position: relative;
            overflow: visible;
        }

        .menu-item a {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-muted);
            text-decoration: none;
            padding: 10px 16px;
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
            font-weight: 500;
            transition: color 0.2s ease, background 0.2s ease, transform 0.15s ease;
            white-space: nowrap;
        }

        .menu-item a i {
            opacity: 0.85;
            font-size: 0.95em;
        }

        .menu-item a:hover {
            color: var(--text-light);
            background: rgba(255, 255, 255, 0.06);
        }

        .menu-item a.active {
            color: #fff;
            background: linear-gradient(135deg, var(--primary) 0%, #7c3aed 100%);
            box-shadow: 0 4px 14px var(--primary-glow);
        }

        .menu-item a.active i {
            opacity: 1;
        }

        .menu-item.hidden {
            display: none;
        }

        .favorite-btn {
            position: absolute;
            top: -6px;
            right: -6px;
            width: 24px;
            height: 24px;
            min-width: 24px;
            min-height: 24px;
            background: var(--bg-card);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 50%;
            color: var(--text-muted);
            font-size: 11px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s ease, transform 0.2s ease, color 0.2s ease, background 0.2s ease;
            z-index: 10;
            overflow: visible;
            padding: 0;
        }

        .favorite-btn i {
            font-size: 11px;
            display: block;
            line-height: 1;
        }

        .menu-item:hover .favorite-btn {
            opacity: 1;
        }

        .favorite-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
            color: #fff;
            transform: scale(1.1);
        }

        .favorite-btn.active {
            opacity: 1;
            background: linear-gradient(135deg, #f59e0b, #ef4444);
            border-color: transparent;
            color: #fff;
        }

        #content-main {
            flex: 1;
            position: relative;
            background: #fafafa;
            border-radius: var(--radius) var(--radius) 0 0;
            overflow: hidden;
            box-shadow: 0 -1px 0 rgba(0, 0, 0, 0.05);
        }

        .tool-iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            display: none;
        }

        .tool-iframe.active {
            display: block;
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 1.35rem;
            cursor: pointer;
            padding: 8px;
            margin-right: 8px;
            border-radius: var(--radius-sm);
            transition: background 0.2s ease;
        }

        .menu-toggle:hover {
            background: rgba(255, 255, 255, 0.06);
        }

        @media (max-width: 768px) {
            .category-filter {
                display: none;
            }

            .menu-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
                order: 1;
            }

            .header-title,
            .logo {
                order: 2;
            }

            .header-title {
                margin-right: auto;
            }

            .search-container {
                order: 3;
                margin-right: 0;
            }

            .search-box {
                width: 120px;
            }

            .search-box:focus {
                width: 160px;
            }

            .menu-wrapper {
                position: absolute;
                top: 64px;
                left: 0;
                width: 100%;
                height: 0;
                overflow: hidden;
                background: var(--nav-bg);
                backdrop-filter: blur(12px);
                border-bottom: 1px solid var(--nav-border);
                transition: height 0.3s ease;
                z-index: 9;
            }

            .menu-wrapper.active {
                height: auto;
                max-height: calc(100vh - 64px);
                overflow-y: auto;
            }

            .menu-list {
                flex-direction: column;
                padding: 16px;
                gap: 6px;
            }

            .menu-item a {
                white-space: normal;
            }
        }
    </style>
</head>
<body>

<!-- 对搜索引擎友好的补充说明（与首屏内容一致，便于抓取） -->
<nav class="seo-hidden" aria-label="本站工具列表">
    <h2>提供以下在线工具</h2>
    <ul>
        <li>文本加工：大小写转换、去重、排序。</li>
        <li>编码解码：Base64、URL、HTML 实体转义。</li>
        <li>二维码生成：支持自定义样式。</li>
        <li>加密解密：MD5、SHA、AES。</li>
        <li>文本对比：Diff 高亮差异。</li>
        <li>JSON 格式化：解析、格式化、美化。</li>
        <li>时间戳与日期计算、正则可视化、Cron 表达式、UUID 生成、Nacos 服务管理。</li>
    </ul>
</nav>

<header>
    <button class="menu-toggle" id="menuToggle" aria-label="打开菜单">
        <i class="fas fa-bars"></i>
    </button>

    <h1 class="header-title">
        <a href="/" class="logo" style="text-decoration: none;">
            <i class="fas fa-toolbox" aria-hidden="true"></i>
            <span>极简工具箱</span>
        </a>
    </h1>

    <!-- 搜索框 -->
    <div class="search-container">
        <input type="text" class="search-box" id="searchBox" placeholder="搜索工具...">
        <i class="fas fa-search search-icon"></i>
    </div>

    <!-- 分类筛选：工具多时可按类查看 -->
    <div class="category-filter" id="categoryFilter">
        <button type="button" class="category-btn active" data-category="">全部</button>
        <button type="button" class="category-btn" data-category="文本">文本</button>
        <button type="button" class="category-btn" data-category="编码">编码</button>
        <button type="button" class="category-btn" data-category="开发">开发</button>
        <button type="button" class="category-btn" data-category="时间">时间</button>
        <button type="button" class="category-btn" data-category="其他">其他</button>
    </div>

    <nav class="menu-wrapper" id="menuWrapper" aria-label="工具导航">
        <ul class="menu-list" id="menuList">
            <!-- 由脚本根据 MENU_ITEMS 配置生成 -->
        </ul>
    </nav>
</header>

<main id="content-main">
    <noscript>
        <p>请启用 JavaScript 以使用极简工具箱。本站提供：文本加工、编码解码、二维码、加解密、文本对比、JSON 格式化、时间戳与日期计算、正则可视化、Cron 表达式、UUID 生成、Nacos 管理等在线工具。</p>
    </noscript>
</main>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "极简工具箱",
  "description": "免费无广告的在线开发工具合集：JSON 格式化、编码解码、加解密、时间戳、正则、Cron、UUID、二维码等。",
  "url": "https://qr.linliang.top",
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Any"
}
</script>

<script>
    // 工具菜单配置：新增工具只需在此添加一项即可，category 用于分类筛选
    const MENU_ITEMS = [
        {
            id: 'text-process',
            name: '文本加工',
            src: '文本加工.html',
            keywords: '文本 加工 大小写 转换 去重 txt text',
            category: '文本',
            icon: 'fa-file-alt'
        },
        {
            id: 'codec',
            name: '编码解码',
            src: '编码解码.html',
            keywords: '编码 解码 base64 url',
            category: '编码',
            icon: 'fa-terminal'
        },
        {
            id: 'base64-image',
            name: 'Base64图片',
            src: 'Base64图片转换.html',
            keywords: 'base64 图片 转换 编码 解码 image',
            category: '编码',
            icon: 'fa-image'
        },
        {
            id: 'qrcode',
            name: '二维码',
            src: '二维码生成器.html',
            keywords: '二维码 qrcode 生成',
            category: '其他',
            icon: 'fa-qrcode'
        },
        {
            id: 'crypto',
            name: '加密解密',
            src: '加密解密.html',
            keywords: '加密 解密 md5 aes sha',
            category: '编码',
            icon: 'fa-shield-alt'
        },
        {
            id: 'diff',
            name: '文本对比',
            src: '文本对比.html',
            keywords: '文本 对比 diff 差异 txt text',
            category: '文本',
            icon: 'fa-columns'
        },
        {
            id: 'json',
            name: 'JSON格式',
            src: 'JSON 格式化.html',
            keywords: 'json 格式化 美化',
            category: '开发',
            icon: 'fa-code'
        },
        {
            id: 'time',
            name: '时间计算',
            src: '时间计算器.html',
            keywords: '时间 计算 时间戳',
            category: '时间',
            icon: 'fa-clock'
        },
        {
            id: 'date',
            name: '日期计算',
            src: '日期计算器.html',
            keywords: '日期 计算 间隔',
            category: '时间',
            icon: 'fa-calendar-alt'
        },
        {
            id: 'regex',
            name: '正则可视化',
            src: '正则可视化.html',
            keywords: '正则 正则表达式 可视化 regex',
            category: '开发',
            icon: 'fa-project-diagram'
        },
        {
            id: 'cron',
            name: 'Cron表达式',
            src: 'Cron 表达式工具.html',
            keywords: 'cron 表达式 定时任务',
            category: '时间',
            icon: 'fa-clock'
        },
        {
            id: 'nacos',
            name: 'Nacos管理',
            src: 'Nacos 服务管理.html',
            keywords: 'nacos 服务 管理',
            category: '开发',
            icon: 'fa-server'
        },
        {
            id: 'command-dict',
            name: '命令速查',
            src: '命令速查.html',
            keywords: '命令 查询 字典 linux macos debian docker git kubernetes cmd',
            category: '开发',
            icon: 'fa-terminal'
        },
        {
            id: 'uuid',
            name: 'UUID生成',
            src: 'UUID生成器.html',
            keywords: 'uuid 随机数 生成 guid',
            category: '开发',
            icon: 'fa-fingerprint'
        },
        {
            id: 'color-converter',
            name: '颜色转换',
            src: '颜色转换工具.html',
            keywords: '颜色 转换 hex rgb hsl cmyk hsv 透明度 渐变 对比度',
            category: '其他',
            icon: 'fa-palette'
        },
        {
            id: 'todo',
            name: '待办清单',
            src: 'todo.html?embed=1',
            keywords: 'todo 待办 清单 任务 task 计划',
            category: '其他',
            icon: 'fa-list-check'
        },
        {
            id: 'changelog',
            name: '更新记录',
            src: '更新记录.html',
            keywords: '更新 记录 git commit 日志 版本',
            category: '其他',
            icon: 'fa-clock-rotate-left'
        }
    ];

    const contentMain = document.getElementById('content-main');
    const menuToggle = document.getElementById('menuToggle');
    const menuWrapper = document.getElementById('menuWrapper');
    const searchBox = document.getElementById('searchBox');
    const menuList = document.getElementById('menuList');
    const categoryFilter = document.getElementById('categoryFilter');
    const DEFAULT_TOOL_ID = 'text-process';

    // 收藏工具数据（使用 localStorage 记录）
    const FAVORITES_KEY = 'tool-favorites';

    // 根据配置渲染菜单（便于后续扩展：加工具只改 MENU_ITEMS）
    function renderMenu() {
        menuList.innerHTML = '';
        MENU_ITEMS.forEach(item => {
            const li = document.createElement('li');
            li.className = 'menu-item';
            li.dataset.keywords = item.keywords;
            li.dataset.category = item.category;
            li.innerHTML = `<a href="#${item.id}" data-id="${item.id}" data-src="${item.src}"><i class="fas ${item.icon}"></i>${item.name}</a>`;
            menuList.appendChild(li);
        });
    }

    // 获取收藏列表
    function getFavorites() {
        const favorites = localStorage.getItem(FAVORITES_KEY);
        return favorites ? JSON.parse(favorites) : [];
    }

    // 保存收藏列表
    function saveFavorites(favorites) {
        localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));
    }

    // 切换收藏状态
    function toggleFavorite(toolId) {
        let favorites = getFavorites();
        const index = favorites.indexOf(toolId);

        if (index > -1) {
            favorites.splice(index, 1); // 取消收藏
        } else {
            favorites.push(toolId); // 添加收藏
        }

        saveFavorites(favorites);
        updateMenuOrder();
    }

    // 初始化收藏按钮
    function initFavoriteButtons() {
        const favorites = getFavorites();

        document.querySelectorAll('.menu-item').forEach(item => {
            const link = item.querySelector('a');
            const toolId = link.getAttribute('data-id');

            // 创建收藏按钮
            const btn = document.createElement('button');
            btn.className = 'favorite-btn';
            btn.innerHTML = '<i class="fas fa-star"></i>';
            btn.title = '收藏/取消收藏';

            // 设置初始状态
            if (favorites.includes(toolId)) {
                btn.classList.add('active');
            }

            // 点击事件
            btn.addEventListener('click', function (e) {
                e.preventDefault();
                e.stopPropagation();
                this.classList.toggle('active');
                toggleFavorite(toolId);
            });

            item.appendChild(btn);
        });
    }

    // 更新菜单排序
    function updateMenuOrder() {
        const favorites = getFavorites();
        const allItems = Array.from(document.querySelectorAll('.menu-item'));

        // 按收藏状态排序：收藏的在前，未收藏的在后
        allItems.sort((a, b) => {
            const aId = a.querySelector('a').getAttribute('data-id');
            const bId = b.querySelector('a').getAttribute('data-id');
            const aFav = favorites.includes(aId);
            const bFav = favorites.includes(bId);

            if (aFav && !bFav) return -1;
            if (!aFav && bFav) return 1;
            return 0; // 保持原有顺序
        });

        // 重新排列
        allItems.forEach(item => {
            menuList.appendChild(item);
        });
    }

    let currentCategory = '';

    function updateVisibility() {
        const keyword = searchBox.value.toLowerCase().trim();
        document.querySelectorAll('.menu-item').forEach(item => {
            const categoryMatch = !currentCategory || item.dataset.category === currentCategory;
            const text = (item.textContent || '').toLowerCase();
            const keywords = (item.getAttribute('data-keywords') || '').toLowerCase();
            const searchMatch = !keyword || text.includes(keyword) || keywords.includes(keyword);
            if (categoryMatch && searchMatch) {
                item.classList.remove('hidden');
            } else {
                item.classList.add('hidden');
            }
        });
    }

    if (categoryFilter) {
        categoryFilter.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                categoryFilter.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentCategory = this.dataset.category || '';
                updateVisibility();
            });
        });
    }

    searchBox.addEventListener('input', function () {
        if (this.value.trim() && window.innerWidth <= 768) {
            menuWrapper.classList.add('active');
        }
        updateVisibility();
    });

    // 快捷键：Windows Ctrl+K / macOS ⌘+K 聚焦搜索框
    document.addEventListener('keydown', function (e) {
        // 当焦点在子工具 iframe 内时，不拦截快捷键，交给子页面处理
        if (document.activeElement && document.activeElement.tagName === 'IFRAME') {
            return;
        }
        if ((e.metaKey || e.ctrlKey) && e.key.toLowerCase() === 'k') {
            e.preventDefault();
            searchBox.focus();
            searchBox.select();
        }
    });

    function switchTool(toolId) {
        const targetLink = document.querySelector(`.menu-item a[data-id="${toolId}"]`);
        if (!targetLink) return;

        const src = targetLink.getAttribute('data-src');

        document.querySelectorAll('.menu-item a').forEach(link => link.classList.remove('active'));
        targetLink.classList.add('active');

        const allIframes = document.querySelectorAll('.tool-iframe');
        allIframes.forEach(iframe => iframe.classList.remove('active'));

        let targetIframe = document.querySelector(`.tool-iframe[data-id="${toolId}"]`);

        if (!targetIframe) {
            targetIframe = document.createElement('iframe');
            targetIframe.className = 'tool-iframe';
            targetIframe.setAttribute('data-id', toolId);
            targetIframe.setAttribute('title', targetLink.textContent.trim());
            targetIframe.src = src;
            contentMain.appendChild(targetIframe);
        }

        targetIframe.classList.add('active');

        if (window.location.hash !== '#' + toolId) {
            history.pushState(null, null, '#' + toolId);
        }

        // 移动端点击菜单后自动收起
        if (window.innerWidth <= 768) {
            menuWrapper.classList.remove('active');
        }
    }

    menuList.addEventListener('click', function (e) {
        const link = e.target.closest('.menu-item a');
        if (!link) return;
        e.preventDefault();
        switchTool(link.getAttribute('data-id'));
    });

    // macOS/Chrome：触控板/滚轮在菜单区域时，用垂直滚动驱动横向滚动（因已隐藏滚动条）
    menuWrapper.addEventListener('wheel', function (e) {
        if (this.scrollWidth <= this.clientWidth) return;
        const canScrollLeft = this.scrollLeft > 0;
        const canScrollRight = this.scrollLeft < this.scrollWidth - this.clientWidth - 1;
        const dy = e.deltaY;
        if (dy > 0 && canScrollRight) {
            e.preventDefault();
            this.scrollLeft += Math.min(80, dy);
        } else if (dy < 0 && canScrollLeft) {
            e.preventDefault();
            this.scrollLeft += Math.max(-80, dy);
        }
    }, {passive: false});

    // 监听 URL 变化
    window.addEventListener('hashchange', () => {
        const toolId = window.location.hash.replace('#', '');
        if (toolId) switchTool(toolId);
    });

    // 汉堡菜单点击事件
    menuToggle.addEventListener('click', function () {
        menuWrapper.classList.toggle('active');
    });

    // 点击菜单外部关闭菜单
    document.addEventListener('click', function (e) {
        if (window.innerWidth <= 768 && !menuToggle.contains(e.target) && !menuWrapper.contains(e.target)) {
            menuWrapper.classList.remove('active');
        }
    });

    // 页面加载
    document.addEventListener('DOMContentLoaded', () => {
        renderMenu();
        initFavoriteButtons();
        updateMenuOrder();
        updateVisibility();
        const hashId = window.location.hash.replace('#', '');
        switchTool(hashId || DEFAULT_TOOL_ID);
    });
</script>
<script async src="https://tongji.linliang.top/script.js"
        data-website-id="b6c7616f-93fa-424e-82b4-358d4bb6fc41"></script>
</body>
</html>
